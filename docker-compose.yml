version: "3.9"

services:
  web:
    build:
      context: .
    environment:
      DATABASE_URL: file:./dev.db
      NODE_ENV: production
    ports:
      - 3000:3000
    volumes:
      # Mount the database file for persistence
      - ./dev.db:/app/dev.db:rw
      # Mount the entire app directory for development (optional)
      - .:/app
      # Exclude node_modules to avoid conflicts
      - /app/node_modules
